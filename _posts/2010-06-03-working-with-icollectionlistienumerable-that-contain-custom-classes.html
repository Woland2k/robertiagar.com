---
layout: post
title: Working with ICollection/List/IEnumerable that contain custom classes
date: 2010-06-03 23:37:35.000000000 +03:00
categories:
- .NET General
- C#
tags: []
status: publish
type: post
published: true
meta:
  _wpas_done_fb: '1'
  _wpas_done_twitter: '1'
  _oembed_cca8e34bd8363ccb94ac0b5c30fa6fe5: '{{unknown}}'
  _oembed_4363c4572055d537520b732c0460e228: '{{unknown}}'
  _oembed_8aa7b4ce10c60a73e9609a5179665f67: '{{unknown}}'
  _oembed_b5185ae9d7a40037363a9b24fae660cd: '{{unknown}}'
  _oembed_db562ae3a3664be2737a1f3439f7e706: '{{unknown}}'
  _oembed_ce0d5287f21b03fb889009f0173ceaca: '{{unknown}}'
  _oembed_9e77cc17b76408700c6cecfa3cf39333: '{{unknown}}'
  _oembed_16074c3c7cf55bf16b3f1cb9c5b986ae: '{{unknown}}'
author: 
---
<p>Again, about my <a href="http://xbladegraphix.co.cc/TwitBy">Twitter Client</a>. I’ve made a custom class show the tweet and then a ICollection for the public property of the Tweets in the TwitterViewModel.</p>
<p><!--more--></p>
<p>Problem: Each I time I get new tweets I have to empty the Collection. I tried to use the Contains method every time I added a new Tweet, but as <a href="http://10rem.net">Pete Brown</a> said that will always return false.</p>
<p>Solution: Implement IEquatable&lt;Tweet&gt; on my Tweet class. Now when Contains check if the tweet exists in the list it will work.</p>
<p>Other example.</p>
<p>Say you have this custom class:</p>
<p>class User<br />
{<br />
      public string Name { get; set; }<br />
      public long ID { get; set; }<br />
}</p>
<p>Not going to bother INotifyPropertyChanged. This will be only about the IEquatable class.</p>
<p>Create a ICollection&lt;User&gt; and add some data:</p>
<p>ICollection&lt;User&gt; list = new List&lt;User&gt;();<br />
list.Add(new User { Name = “Robert”, ID = 123409 });<br />
list.Add(new User { Name = “Pete”, ID = 23410 });</p>
<p>Now. Say you have some form that creates a new User, check if it exists and then tries to add it. For sake of simplicity I won’t use a form:</p>
<p>var user = new User { Name = “Pete”, ID= 23410 });<br />
if(!list.Contains(user))<br />
     list.Add(user);</p>
<p>This won’t work. It’ll add it even you know that it contains it. Simply put “Two instances of a class representing the same tweet (or in this case user) are two different things.” (<a href="http://twitter.com/Pete_Brown/status/15341247123">@Pete_Brown on Twitter</a>)</p>
<p>Implement the IEquatable class and your class should look like this:</p>
<p>class User: IEquatable&lt;User&gt;<br />
{<br />
      public string Name { get; set; }<br />
      public long ID { get; set; }</p>
<p>      public bool Equals(User other)<br />
      {<br />
            if(other.ID == this.ID)<br />
                  return true;<br />
            else<br />
                  return false;<br />
      }<br />
}</p>
<p>Now Contains() will work properly and your List manipulations will work like a charm.</p>
<p>Hope you found this post useful. It’s been a pain of figuring it out. Had help from Pete Brown.<br />
Subscribe to his blog: <a href="http://10rem.net">http://10rem.net</a><br />
Follow him on Twitter: <a href="http://twitter.com/Pete_Brown">http://twitter.com/Pete_Brown</a></p>
<p>Me? You can find my blog at <a href="http://robertiagar.wordpress.com/">http://robertiagar.wordpress.com/</a> (mouthful I know) and Twitter: <a href="http://twitter.com/RobertIagar">http://twitter.com/RobertIagar</a></p>
<p>Stay tuned for more interesting finds…</p>
